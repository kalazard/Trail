<div id="modalAjoutEventForm" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title">Ajouter un événement</h4>
            </div>
            <div class="modal-body">
                {{ form_start(form, {'attr': {'id': 'ajouterEvent'}}) }}
                {{ form_errors(form) }}
                {% if app.user.id is defined %} 
                    <input type="hidden" name="createur" value="{{ app.user.id }}"/>
                {% else %}
                    <input type="hidden" name="createur" value="0"/>
                {% endif %}

                <!-- Champ titre -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.titre, "Titre : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.titre) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.titre, {'attr': {'class': 'form-control', 'maxlength': '45'}}) }}
                        </div>
                    </div>
                </div>

                <!-- Champ description -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.description, "Description : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.description) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.description, {'attr': {'class': 'form-control', 'maxlength': '45'}}) }}
                        </div>
                    </div>
                </div>

                <!-- Champ lien kidoikoiaki -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.lienKid, "Lien KID : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.lienKid) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.lienKid, {'attr': {'class': 'form-control', 'maxlength': '45'}}) }}
                        </div>
                    </div>
                </div>

                <!-- Champ status -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.status, "Status : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.status) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.status, {'attr': {'class': 'form-control', 'maxlength': '45'}}) }}
                        </div>
                    </div>
                </div>

                <!-- Champ date début -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.date_debut, "Date début : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.date_debut) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.date_debut) }}
                        </div>
                    </div>
                </div>

                <!-- Champ date fin -->
                <div class="form-group">
                    <div class="row">
                        {{ form_label(form.date_fin, "Date fin : ", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
                        {{ form_errors(form.date_fin) }}
                        <div class="col-sm-9">
                            {{ form_widget(form.date_fin) }}
                        </div>
                    </div>
                </div>

                <!-- Champ participants -->
                <div class="form-group">
                    <div class="row">
                        <label class='col-sm-3 control-label'>Participants :</label>
                        <div class="col-sm-9">
                            <select class="form-control" name="participants[]" multiple>
                                {% for monUser in listeUser %}
                                    <option value='{{monUser.id}}'>{{monUser.userName}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Champ type d'événement -->
                <div class="form-group">
                    <div class="row">
                        <label class='col-sm-3 control-label'>Type d'événement :</label>
                        <div class="col-sm-9">
                            <select id="selectTypeEvent" class="form-control" name="type">
                                <option value="1">Entrainement</option>
                                <option value="2">Entrainement personnel</option>
                                <option value="3">Evenement divers</option>
                                <option value="4">Sortie découverte</option>
                                <option value="5">Course officielle</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="specificites">
                    <div class="form-group">
                        <div class="row">
                            <label class='col-sm-3 control-label'>Programme :</label>
                            <div class="col-sm-9">
                                <select name='programme' class="form-control">
                                    {% for monProgramme in listeProgramme %}
                                        <option value='{{monProgramme.id}}'>{{monProgramme.label}} ({{monProgramme.duree|date('Y-m-d')}})</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <label class='col-sm-3 control-label'>Lieu de rendez-vous :</label>
                            <div class="col-sm-9">
                                <select name='lieu' class="form-control">
                                    {% for monLieu in listeLieuRendezVous %}
                                        <option value='{{monLieu.id}}'>{{monLieu.titre}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type="submit" class="btn btn-primary" value="Ajouter" />
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>

<!-- Script pour la modification dynamique du formulaire -->
<script>
    $("body").on("change", "#selectTypeEvent", function ()
    {
        $('#specificites').children().remove();

        switch ($(this).val())
        {
            case '1': //Entrainement
                $('#specificites').append('<div class="form-group" id="grPrRow">');
                $('#grPrRow').append('<div class="row" id="grPr">');
                $('#grPr').append('<label class="col-sm-3 control-label">Programme :</label>');
                $('#grPr').append('<div class="col-sm-9" id="grPrSel">');
                $('#grPrSel').append('<select name="programme" class="form-control" id="PrSel">');
                {% for monProgramme in listeProgramme %}
                    $('#PrSel').append("<option value='{{monProgramme.id}}'>{{monProgramme.label}} ({{monProgramme.duree|date('Y-m-d')}})</option>");
                {% endfor %}
                    $('#grPrSel').append('</select>');
                    $('#grPr').append('</div>');
                    $('#grPr').append('</div>');
                    $('#specificites').append('</div>');

                    $('#specificites').append('<div class="form-group" id="grRdvRow">');
                    $('#grRdvRow').append('<div class="row" id="grRdv">');
                    $('#grRdv').append('<label class="col-sm-4 control-label">Lieu de rendez vous :</label>');
                    $('#grRdv').append('<div class="col-sm-8" id="grRdvSel">');
                    $('#grRdvSel').append('<select name="programme" class="form-control" id="RdvSel">');
                    {% for monLieu in listeLieuRendezVous %}
                    $('#RdvSel').append("<option value='{{monLieu.id}}'>{{monLieu.titre}}</option>");
                    {% endfor %}
                    $('#grRdvSel').append('</select>');
                    $('#grRdv').append('</div>');
                    $('#grRdv').append('</div>');
                    $('#specificites').append('</div>');
                    break;
                case '2': //Entrainement personnel
                    break;
                case '3': //Evenement divers
                    $('#specificites').append('<div class="form-group" id="grLabelRow">');
                    $('#grLabelRow').append('<div class="row" id="grLabel">');
                    $('#grLabel').append('<label class="col-sm-3 control-label">Label :</label>');
                    $('#grLabel').append('<div class="col-sm-9" id="grLabInp">');
                    $('#grLabInp').append('<input type="text" class="form-control" name="label" maxlength="45"/>');
                    $('#grLabel').append('</div>');
                    $('#grLabel').append('</div>');
                    $('#specificites').append('</div>');
                    break;
                case '4': //Sortie découverte
                    $('#specificites').append('<div class="form-group" id="grRdvRow">');
                    $('#grRdvRow').append('<div class="row" id="grRdv">');
                    $('#grRdv').append('<label class="col-sm-4 control-label">Lieu de rendez vous :</label>');
                    $('#grRdv').append('<div class="col-sm-8" id="grRdvSel">');
                    $('#grRdvSel').append('<select name="programme" class="form-control" id="RdvSel">');
                    {% for monLieu in listeLieuRendezVous %}
                    $('#RdvSel').append("<option value='{{monLieu.id}}'>{{monLieu.titre}}</option>");
                    {% endfor %}
                    $('#grRdvSel').append('</select>');
                    $('#grRdv').append('</div>');
                    $('#grRdv').append('</div>');
                    $('#specificites').append('</div>');
                    break;
                case '5': //Course officielle
                    $('#specificites').append('<div class="form-group" id="grLabelRow">');
                    $('#grLabelRow').append('<div class="row" id="grLabel">');
                    $('#grLabel').append('<label class="col-sm-3 control-label">Site URL :</label>');
                    $('#grLabel').append('<div class="col-sm-9" id="grLabInp">');
                    $('#grLabInp').append('<input type="url" class="form-control" name="siteUrl" maxlength="45"/>');
                    $('#grLabel').append('</div>');
                    $('#grLabel').append('</div>');
                    $('#specificites').append('</div>');
                    break;
                default:
            }
        });
</script>
{% javascripts '@SiteTrailBundle/Resources/js/event/*' %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
