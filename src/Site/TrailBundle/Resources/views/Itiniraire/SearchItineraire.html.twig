{% extends "SiteTrailBundle::layout.html.twig" %}

{% block title %}{{ parent() }} - Recherche d'itinéraire{% endblock %}

{% block body %}
	  {% if app.user %}
	  <div class="container">
		      <h1>Recherche d'itinéraire</h1>
			  
			  <form class="form-inline" role="form" name="myform" action="{{ path('site_trail_searchitineraire') }}" method="POST">
			  		<table class="table table-striped">
				<thead>
					<tr>
						<th><label for="nom">Nom:</label></th>
						<th><label for="typechemin">Type de chemin:</label></th>
						<th><label for="denivelep">Dénivelé positif:</label></th>
						<th><label for="denivelen">Dénivelé négatif:</label></th>
						<th><label for="datecrea">Date de création:</label></th>
						<th><label for="recipient-name" class="control-label">Difficulté:</label></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th><input name="nom" id="nom" type="text" size="25" placeholder="Nom"></th>
						<th><input name="typechemin" id="typechemin" type="text" size="25" placeholder="Type de chemin"></th>
						<th><input name="denivelep" id="denivelep" type="text" size="25" placeholder="Dénivelé positif"></th>
						<th><input name="denivelen" id="denivelen" type="text" size="25" placeholder="Dénivelé négatif"></th>
						<th><input name="datecrea" id="datecrea" type="date" size="25" placeholder="Date de création"></th>
						<th><select name="difficulte">
		                  {% if diffs.difficultes is not empty %}
		                  <option value=""/></option>
									{% for diff in diffs.difficultes%}
										<option value={{diff.niveau}}>{{diff.label}}</option>
									{% endfor %}
						  {% endif %}
		                </select></th>
					</tr>
				</tbody>
			   </table>
		            <input name="valid" type="hidden" value="ok">
		            <div class="form-group">
						<input type="submit" name="submit" value=" Rechercher ">
					</div>
				</form>
			  <table class="table table-striped">
				<thead>
					<tr>
						<th>Itinéraire</th>
						<th>Type de chemin</th>
						<th>Difficulté</th>
						<th>Date de création</th>
						<th>Longueur du parcours</th>
					</tr>
				</thead>
				<tbody>
				{% if resultats is empty %}
					{% if list.list is not empty %}
						{% for itineraire in list.list %}
						<tr>
							<td>{{itineraire.nom}}</td>
							<td>{{itineraire.typechemin}}</td>
							<td>{{itineraire.difficulte.label}}</td>
							<td>{{itineraire.datecreation}}</td>
							<td>{{itineraire.longueur}}</td>
						</tr>
						{% endfor %}
					{% endif %}
				  {% else %}
						{% if resultats.searchResults is not empty %}
							{% for itineraire in resultats.searchResults %}
								<tr>
									<td>{{itineraire.nom}}</td>
									<td>{{itineraire.typechemin}}</td>
									<td>{{itineraire.difficulte.label}}</td>
									<td>{{itineraire.datecreation}}</td>
									<td>{{itineraire.longueur}}</td>
								</tr>
							{% endfor %}
						{% endif %}
				  {% endif %}
				</tbody>
			   </table>
		</div>
	 {% else %}
	     <p>Vous n'avez pas accès à cette page</p>
	 {% endif %}
{% endblock %}